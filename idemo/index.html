<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>LimeNit Sentiment Analyzer - Interactive Demo</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
      background: #000;
      overflow: hidden;
      width: 100vw;
      height: 100vh;
    }

    #demo-container {
      position: relative;
      width: 100%;
      height: 100%;
      background: #000;
    }

    #canvas {
      position: relative;
      width: 100%;
      height: 100%;
      overflow: hidden;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    #canvas img {
      max-width: 100%;
      max-height: 100%;
      width: auto;
      height: auto;
      object-fit: contain;
      display: block;
      transition: opacity 200ms cubic-bezier(0.4, 0, 0.2, 1);
    }

    #canvas.fade-out img {
      opacity: 0;
    }

    #overlay {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
    }

    #overlay > * {
      pointer-events: auto;
    }

    .backdrop {
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.85);
      backdrop-filter: blur(12px);
      z-index: 999;
      animation: fadeIn 250ms ease-out;
      pointer-events: auto;
    }

    /* Tooltip styles */
    .tooltip {
      position: absolute;
      background: linear-gradient(135deg, #FF6B7A 0%, #FF8A95 100%);
      border-radius: 16px;
      padding: 24px;
      color: #fff;
      box-shadow: 0 20px 60px rgba(255, 107, 122, 0.5), 0 0 0 1px rgba(255, 255, 255, 0.1);
      z-index: 1000;
      max-width: 400px;
      animation: tooltipSlide 350ms cubic-bezier(0.34, 1.56, 0.64, 1);
      transform-origin: center;
    }

    .tooltip::before {
      content: '';
      position: absolute;
      width: 20px;
      height: 20px;
      background: linear-gradient(135deg, #FF6B7A 0%, #FF8A95 100%);
      transform: rotate(45deg);
      z-index: -1;
    }

    .tooltip.top::before {
      bottom: -8px;
      left: 50%;
      margin-left: -10px;
    }

    .tooltip.bottom::before {
      top: -8px;
      left: 50%;
      margin-left: -10px;
    }

    .tooltip.left::before {
      right: -8px;
      top: 50%;
      margin-top: -10px;
    }

    .tooltip.right::before {
      left: -8px;
      top: 50%;
      margin-top: -10px;
    }

    .tooltip-number {
      display: inline-block;
      width: 32px;
      height: 32px;
      background: rgba(255, 255, 255, 0.25);
      border-radius: 50%;
      text-align: center;
      line-height: 32px;
      font-weight: 800;
      font-size: 16px;
      margin-bottom: 12px;
      backdrop-filter: blur(10px);
    }

    .tooltip-title {
      font-size: 18px;
      font-weight: 700;
      margin-bottom: 8px;
      letter-spacing: -0.3px;
    }

    .tooltip-text {
      font-size: 14px;
      line-height: 1.6;
      opacity: 0.95;
      margin-bottom: 16px;
    }

    .tooltip-button {
      background: rgba(255, 255, 255, 0.95);
      color: #FF6B7A;
      border: none;
      border-radius: 10px;
      padding: 12px 28px;
      font-size: 14px;
      font-weight: 700;
      cursor: pointer;
      width: 100%;
      transition: all 200ms cubic-bezier(0.4, 0, 0.2, 1);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    }

    .tooltip-button:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(0, 0, 0, 0.25);
      background: #fff;
    }

    /* Hotspot pulse animation */
    .hotspot {
      position: absolute;
      background: rgba(255, 107, 122, 0.25);
      border: 3px solid rgba(255, 107, 122, 0.9);
      border-radius: 12px;
      cursor: pointer;
      transition: all 250ms cubic-bezier(0.4, 0, 0.2, 1);
      animation: hotspotPulse 2s infinite;
      display: flex;
      align-items: center;
      justify-content: center;
      backdrop-filter: blur(8px);
    }

    .hotspot:hover {
      background: rgba(255, 107, 122, 0.4);
      border-color: rgba(255, 107, 122, 1);
      transform: scale(1.05);
      box-shadow: 0 8px 32px rgba(255, 107, 122, 0.5);
      animation: none;
    }

    .hotspot-label {
      font-size: 13px;
      font-weight: 700;
      color: #fff;
      text-shadow: 0 2px 8px rgba(0, 0, 0, 0.5);
      pointer-events: none;
    }

    /* Highlight box */
    .highlight-box {
      position: absolute;
      border: 3px solid #FF6B7A;
      border-radius: 12px;
      background: rgba(255, 107, 122, 0.1);
      animation: highlightPulse 2s infinite;
      pointer-events: none;
      box-shadow: 0 0 30px rgba(255, 107, 122, 0.4), inset 0 0 30px rgba(255, 107, 122, 0.2);
    }

    /* Modal styles */
    .modal {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%);
      border-radius: 24px;
      padding: 48px;
      max-width: 600px;
      width: 90%;
      box-shadow: 0 40px 120px rgba(0, 0, 0, 0.8);
      z-index: 1001;
      animation: modalSlide 350ms cubic-bezier(0.34, 1.56, 0.64, 1);
      text-align: center;
      border: 2px solid rgba(255, 107, 122, 0.3);
    }

    .modal-icon {
      width: 80px;
      height: 80px;
      margin: 0 auto 24px;
      background: linear-gradient(135deg, #FF6B7A 0%, #FF8A95 100%);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 40px;
      box-shadow: 0 8px 32px rgba(255, 107, 122, 0.4);
    }

    .modal-title {
      font-size: 32px;
      font-weight: 800;
      color: #fff;
      margin-bottom: 16px;
      letter-spacing: -0.5px;
    }

    .modal-text {
      font-size: 16px;
      line-height: 1.7;
      color: rgba(255, 255, 255, 0.8);
      margin-bottom: 32px;
    }

    .modal-button {
      background: linear-gradient(135deg, #FF6B7A 0%, #FF8A95 100%);
      color: #fff;
      border: none;
      border-radius: 12px;
      padding: 16px 48px;
      font-size: 16px;
      font-weight: 700;
      cursor: pointer;
      transition: all 200ms cubic-bezier(0.4, 0, 0.2, 1);
      box-shadow: 0 8px 24px rgba(255, 107, 122, 0.4);
    }

    .modal-button:hover {
      transform: translateY(-3px);
      box-shadow: 0 12px 32px rgba(255, 107, 122, 0.5);
    }

    /* Navigation controls */
    .nav-controls {
      position: fixed;
      bottom: 32px;
      right: 32px;
      display: flex;
      gap: 12px;
      z-index: 998;
      animation: fadeIn 400ms ease-out 300ms both;
    }

    .nav-button {
      width: 56px;
      height: 56px;
      background: rgba(255, 255, 255, 0.95);
      border: none;
      border-radius: 16px;
      cursor: pointer;
      transition: all 200ms cubic-bezier(0.4, 0, 0.2, 1);
      box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);
      display: flex;
      align-items: center;
      justify-content: center;
      color: #FF6B7A;
      font-size: 24px;
      font-weight: 300;
    }

    .nav-button:hover:not(:disabled) {
      transform: translateY(-4px);
      box-shadow: 0 12px 32px rgba(0, 0, 0, 0.25);
      background: #fff;
    }

    .nav-button:disabled {
      opacity: 0.3;
      cursor: not-allowed;
    }

    .step-indicator {
      position: fixed;
      top: 32px;
      right: 32px;
      background: rgba(255, 255, 255, 0.95);
      padding: 12px 24px;
      border-radius: 100px;
      font-size: 14px;
      font-weight: 700;
      color: #FF6B7A;
      box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);
      z-index: 998;
      animation: fadeIn 400ms ease-out 300ms both;
    }

    /* Animations */
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    @keyframes tooltipSlide {
      from {
        opacity: 0;
        transform: scale(0.9);
      }
      to {
        opacity: 1;
        transform: scale(1);
      }
    }

    @keyframes modalSlide {
      from {
        opacity: 0;
        transform: translate(-50%, -48%) scale(0.95);
      }
      to {
        opacity: 1;
        transform: translate(-50%, -50%) scale(1);
      }
    }

    @keyframes hotspotPulse {
      0%, 100% {
        box-shadow: 0 0 0 0 rgba(255, 107, 122, 0.5);
      }
      50% {
        box-shadow: 0 0 0 16px rgba(255, 107, 122, 0);
      }
    }

    @keyframes highlightPulse {
      0%, 100% {
        box-shadow: 0 0 30px rgba(255, 107, 122, 0.4), inset 0 0 30px rgba(255, 107, 122, 0.2);
      }
      50% {
        box-shadow: 0 0 50px rgba(255, 107, 122, 0.6), inset 0 0 50px rgba(255, 107, 122, 0.3);
      }
    }

    .loading {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 60px;
      height: 60px;
      border: 4px solid rgba(255, 107, 122, 0.2);
      border-top-color: #FF6B7A;
      border-radius: 50%;
      animation: spin 0.8s linear infinite;
    }

    @keyframes spin {
      to { transform: translate(-50%, -50%) rotate(360deg); }
    }

    *:focus-visible {
      outline: 3px solid #FF6B7A;
      outline-offset: 3px;
    }

    @media (max-width: 768px) {
      .tooltip {
        max-width: 280px;
        padding: 20px;
      }

      .modal {
        padding: 32px 24px;
      }

      .nav-controls {
        bottom: 20px;
        right: 20px;
      }

      .step-indicator {
        top: 20px;
        right: 20px;
        font-size: 12px;
        padding: 10px 20px;
      }
    }
  </style>
</head>
<body>
  <div id="demo-container">
    <div id="canvas">
      <div class="loading"></div>
      <img id="step-image" alt="Demo step" style="opacity: 0;">
    </div>
    <div id="overlay"></div>
  </div>

  <div class="step-indicator">
    <span id="step-counter">1 / 7</span>
  </div>

  <div class="nav-controls">
    <button id="prev-btn" class="nav-button" aria-label="Previous step" disabled>‚Üê</button>
    <button id="next-btn" class="nav-button" aria-label="Next step">‚Üí</button>
  </div>

  <script>
    const CONFIG = {
      defaultWidth: 1400,
      defaultHeight: 800
    };

    const manifest = {
      demoName: "LimeNit Sentiment Analyzer Tour",
      steps: [
        {
          id: "s1",
          asset: "assets/sc1.png",
          elements: [
            {
              type: "tooltip",
              x: 230,
              y: 300,
              text: "Copy and paste messages, emails, replies, or anything else to analyze sentiment.",
              title: "Add Text for Analysis",
              number: "1",
              position: "right",
              next: true
            },
            {
              type: "highlight",
              x: 12,
              y: 208,
              w: 435,
              h: 190
            }
          ]
        },
        {
          id: "s2",
          asset: "assets/sc2.png",
          elements: [
            {
              type: "tooltip",
              x: 230,
              y: 460,
              text: "Lexicon provides rapid analysis. USE offers deeper semantic understanding (may take time to load).",
              title: "Choose Your Model",
              number: "2",
              position: "right",
              next: true
            },
            {
              type: "highlight",
              x: 12,
              y: 410,
              w: 418,
              h: 95
            }
          ]
        },
        {
          id: "s3",
          asset: "assets/sc3.png",
          elements: [
            {
              type: "tooltip",
              x: 230,
              y: 615,
              text: "Click Analyze to start processing your text and get instant sentiment insights.",
              title: "Start Analysis",
              number: "3",
              position: "right",
              next: true
            },
            {
              type: "highlight",
              x: 32,
              y: 545,
              w: 429,
              h: 105
            }
          ]
        },
        {
          id: "s4",
          asset: "assets/sc4.png",
          elements: [
            {
              type: "tooltip",
              x: 905,
              y: 400,
              text: "View detailed sentiment analysis with highlighted tokens, per-sentence breakdown, and overall scores.",
              title: "Line-by-Line Analysis",
              number: "4",
              position: "left",
              next: true
            },
            {
              type: "highlight",
              x: 472,
              y: 38,
              w: 870,
              h: 700
            }
          ]
        },
        {
          id: "s5",
          asset: "assets/sc5.png",
          elements: [
            {
              type: "tooltip",
              x: 905,
              y: 705,
              text: "Export results as JSON or save locally to track sentiment trends over time.",
              title: "Export & Save Results",
              number: "5",
              position: "top",
              next: true
            },
            {
              type: "highlight",
              x: 472,
              y: 635,
              w: 870,
              h: 90
            }
          ]
        },
        {
          id: "s6",
          asset: "assets/sc6.png",
          elements: [
            {
              type: "tooltip",
              x: 230,
              y: 620,
              text: "Upload CSV or Excel files to analyze bulk text. Export results in seconds (may take longer with USE model).",
              title: "Batch Analysis",
              number: "6",
              position: "right",
              next: true
            },
            {
              type: "highlight",
              x: 20,
              y: 30,
              w: 445,
              h: 175
            }
          ]
        },
        {
          id: "s7",
          asset: "assets/sc6.png",
          elements: [
            {
              type: "modal",
              trigger: "auto",
              title: "Ready to Get Started?",
              text: "Experience powerful sentiment analysis for customer feedback, social media monitoring, and market research. Start analyzing for free today!",
              buttonText: "Explore Free Sentiment Analyzer",
              icon: "üéØ"
            }
          ]
        }
      ]
    };

    let currentStep = 0;
    let activeModal = null;
    let scaleX = 1;
    let scaleY = 1;

    const canvas = document.getElementById('canvas');
    const overlay = document.getElementById('overlay');
    const stepImage = document.getElementById('step-image');
    const stepCounter = document.getElementById('step-counter');
    const prevBtn = document.getElementById('prev-btn');
    const nextBtn = document.getElementById('next-btn');

    function calculateScale() {
      const rect = canvas.getBoundingClientRect();
      scaleX = rect.width / CONFIG.defaultWidth;
      scaleY = rect.height / CONFIG.defaultHeight;
    }

    function preloadImage(src) {
      return new Promise((resolve, reject) => {
        const img = new Image();
        img.crossOrigin = 'anonymous';
        img.onload = () => {
          img.decode().then(() => resolve(img)).catch(reject);
        };
        img.onerror = reject;
        img.src = src;
      });
    }

    function clearOverlay() {
      overlay.innerHTML = '';
      if (activeModal) {
        document.body.removeChild(activeModal);
        activeModal = null;
      }
    }

    function createTooltip(element) {
      const tooltip = document.createElement('div');
      tooltip.className = `tooltip ${element.position || 'bottom'}`;
      tooltip.style.left = `${element.x * scaleX}px`;
      tooltip.style.top = `${element.y * scaleY}px`;
      
      if (element.position === 'right') {
        tooltip.style.transform = 'translate(20px, -50%)';
      } else if (element.position === 'left') {
        tooltip.style.transform = 'translate(calc(-100% - 20px), -50%)';
      } else if (element.position === 'top') {
        tooltip.style.transform = 'translate(-50%, calc(-100% - 20px))';
      } else {
        tooltip.style.transform = 'translate(-50%, 20px)';
      }

      const number = element.number ? `<div class="tooltip-number">${element.number}</div>` : '';
      const title = element.title ? `<div class="tooltip-title">${element.title}</div>` : '';
      const button = element.next ? '<button class="tooltip-button" onclick="goNext()">Next ‚Üí</button>' : '';

      tooltip.innerHTML = `
        ${number}
        ${title}
        <div class="tooltip-text">${element.text}</div>
        ${button}
      `;

      overlay.appendChild(tooltip);
    }

    function createHighlight(element) {
      const highlight = document.createElement('div');
      highlight.className = 'highlight-box';
      highlight.style.left = `${element.x * scaleX}px`;
      highlight.style.top = `${element.y * scaleY}px`;
      highlight.style.width = `${element.w * scaleX}px`;
      highlight.style.height = `${element.h * scaleY}px`;
      overlay.appendChild(highlight);
    }

    function createHotspot(element) {
      const hotspot = document.createElement('button');
      hotspot.className = 'hotspot';
      hotspot.style.left = `${element.x * scaleX}px`;
      hotspot.style.top = `${element.y * scaleY}px`;
      hotspot.style.width = `${element.w * scaleX}px`;
      hotspot.style.height = `${element.h * scaleY}px`;
      hotspot.setAttribute('aria-label', element.label);

      if (element.label) {
        const label = document.createElement('span');
        label.className = 'hotspot-label';
        label.textContent = element.label;
        hotspot.appendChild(label);
      }

      hotspot.onclick = () => handleAction(element.action);
      overlay.appendChild(hotspot);
    }

    function createModal(element) {
      const backdrop = document.createElement('div');
      backdrop.className = 'backdrop';
      backdrop.onclick = () => {
        closeModal();
        if (element.buttonText.includes('Explore')) {
          window.open('https://limenit.com/tools/setiment-analyzer', '_blank');
        }
      };

      const modal = document.createElement('div');
      modal.className = 'modal';
      modal.onclick = (e) => e.stopPropagation();

      const icon = element.icon ? `<div class="modal-icon">${element.icon}</div>` : '';

      modal.innerHTML = `
        ${icon}
        <h2 class="modal-title">${element.title}</h2>
        <p class="modal-text">${element.text}</p>
        <button class="modal-button" onclick="handleModalButton('${element.buttonText}')">
          ${element.buttonText}
        </button>
      `;

      backdrop.appendChild(modal);
      document.body.appendChild(backdrop);
      activeModal = backdrop;

      modal.querySelector('button').focus();
    }

    function handleAction(action) {
      if (action.type === 'next') {
        goNext();
      } else if (action.type === 'url') {
        window.open(action.url, '_blank');
      }
    }

    function closeModal() {
      if (activeModal) {
        document.body.removeChild(activeModal);
        activeModal = null;
      }
    }

    window.handleModalButton = function(buttonText) {
      closeModal();
      if (buttonText.includes('Explore')) {
        window.open('https://limenit-sentiment-analyzer.com', '_blank');
      }
    };

    async function renderStep() {
      const step = manifest.steps[currentStep];
      
      canvas.classList.add('fade-out');
      clearOverlay();

      await new Promise(resolve => setTimeout(resolve, 200));

      try {
        const img = await preloadImage(step.asset);
        stepImage.src = img.src;
        stepImage.style.opacity = '1';
        canvas.classList.remove('fade-out');
      } catch (error) {
        console.error('Failed to load image:', error);
        stepImage.style.opacity = '1';
        canvas.classList.remove('fade-out');
      }

      stepCounter.textContent = `${currentStep + 1} / ${manifest.steps.length}`;
      prevBtn.disabled = currentStep === 0;
      nextBtn.disabled = currentStep === manifest.steps.length - 1;

      calculateScale();

      await new Promise(resolve => setTimeout(resolve, 250));
      
      step.elements.forEach(element => {
        if (element.type === 'tooltip') {
          createTooltip(element);
        } else if (element.type === 'hotspot') {
          createHotspot(element);
        } else if (element.type === 'highlight') {
          createHighlight(element);
        } else if (element.type === 'modal' && element.trigger === 'auto') {
          setTimeout(() => createModal(element), 400);
        }
      });
    }

    window.goNext = function() {
      if (currentStep < manifest.steps.length - 1) {
        currentStep++;
        renderStep();
      }
    };

    window.goPrev = function() {
      if (currentStep > 0) {
        currentStep--;
        renderStep();
      }
    };

    prevBtn.onclick = goPrev;
    nextBtn.onclick = goNext;

    document.addEventListener('keydown', (e) => {
      if (e.key === 'ArrowRight') goNext();
      if (e.key === 'ArrowLeft') goPrev();
      if (e.key === 'Escape') closeModal();
    });

    let resizeTimeout;
    window.addEventListener('resize', () => {
      clearTimeout(resizeTimeout);
      resizeTimeout = setTimeout(() => {
        calculateScale();
        clearOverlay();
        const step = manifest.steps[currentStep];
        step.elements.forEach(element => {
          if (element.type === 'tooltip') createTooltip(element);
          else if (element.type === 'hotspot') createHotspot(element);
          else if (element.type === 'highlight') createHighlight(element);
        });
      }, 100);
    });

    calculateScale();
    renderStep();
  </script>
</body>
</html>
